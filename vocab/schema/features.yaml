name: features
description: "Controlled vocabulary for semantic observables (Features). Assay-agnostic."

ontologies:
  - acronym: oba        # biological features
  - acronym: obi        # feature acquisition
  - acronym: pato       # feature quantity and direction
  - acronym: go         # processes/features
  - acronym: uberon     # tissues
  - acronym: cl         # cell types

validation:
  required_fields:
    - id
    - label
  id_prefix: "feature:"
  id_pattern: "^feature:[a-z0-9_]+$"
  allowed_domains:
    - cellular_state
    - molecular
    - metabolite
    - gene_expression
    - morphology
    - physiology
    - other
  allowed_modalities:
    - fluorescence
    - absorbance
    - luminescence
    - microscopy
    - ms
    - qpcr
    - other

  shape:
    id:
      type: string
      pattern: "^feature:[a-z0-9_]+$"
    label: string
    description: string
    domain:
      type: string
      enum: allowed_domains
    tags: list:string
    ontology:
      type: object
      description: "Primary ontology xref plus optional additional xrefs."
      required: [primary]
      properties:
        primary:
          type: object
          required: [id, label, source]
          properties:
            id: string
            label: string
            source:
              type: string
              enum: ontologies.acronym
        additional:
          type: array
          items:
            type: object
            required: [id, label, source]
            properties:
              id: string
              label: string
              source:
                type: string
                enum: ontologies.acronym

    # UI hints only (optional)
    modality_hints: list:
      - modality: enum:allowed_modalities
        channel_hints: list:string
        notes: string

display:
  label_format: "{label} ({id})"
  show_definitions: true
