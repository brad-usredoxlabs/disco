$schema: "http://json-schema.org/draft-07/schema#"
$title: "Project (Investigation)"
type: object

allOf:
  - $ref: "./common.schema.yaml#/$defs/FAIRCommon"

required:
  - title
  - description
  - shortSlug

properties:
  recordType:
    type: string
    description: "Record discriminator. Should be 'project'."
  state:
    type: string
    description: "Workflow state identifier (e.g., draft, approved)."
  recordId:
    type: string
    description: "Stable filesystem identifier generated from naming rules."
  identifier:
    type: string
    description: >
      Unique project identifier. May mirror or differ from the record `id`
      in YAML front matter, depending on institutional conventions.

  title:
    type: string
    description: "Human-readable project name."

  shortSlug:
    type: string
    description: >
      Short identifier (2â€“4 uppercase alphanumeric characters) used in
      child record IDs (e.g. Experiments and Runs).
    pattern: "^[A-Z0-9]{2,4}$"
    minLength: 2
    maxLength: 4

  description:
    type: string
    description: "High-level description of the investigation."

  investigationType:
    $ref: "./datatypes/ontology-term.schema.yaml"
    description: "Ontology term for investigation type (e.g. OBI:0000066)."

  objectives:
    type: array
    description: "List of textual objectives for this project."
    items:
      type: string

  designDescriptors:
    type: array
    description: "High-level design factors encoded as ontology terms."
    items:
      $ref: "./datatypes/ontology-term.schema.yaml"

  contacts:
    type: array
    description: "Key personnel (PI, curator, data steward, etc.)."
    items:
      type: object
      required: [name]
      properties:
        name:
          type: string
        role:
          type: string
        email:
          type: string

  publications:
    type: array
    description: "Publications associated with this project."
    items:
      type: object
      properties:
        title:
          type: string
        doi:
          type: string
        authors:
          type: string

  experiments:
    type: array
    description: >
      Child Experiment record identifiers (Study-level records) associated
      with this Project.
    items:
      type: string
      description: "Experiment record ID or path."

  obiType:
    $ref: "./datatypes/ontology-term.schema.yaml"
    description: "OBI investigation type for this Project."
    default:
      label: "investigation"
      identifier: "OBI:0000066"
      ontology: "OBI"

  jsonldContextOverrides:
    type: object
    description: "Optional prefixes to merge into the base JSON-LD context for child records."
    additionalProperties: false
    properties:
      prefixes:
        type: object
        additionalProperties:
          type: string
  biology:
    type: object
    properties:
      entities:
        $ref: "./datatypes/biological-entity.schema.yaml#/definitions/BiologyEntityList"
    additionalProperties: false

  assertions:
    type: array
    description: "Embedded assertions associated with this project."
    items:
      $ref: "./assertion.schema.yaml"
